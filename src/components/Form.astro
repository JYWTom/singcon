---

---

<script>
  import { navigate } from "astro:transitions/client";
  import PocketBase from "pocketbase";
  const pb = new PocketBase(import.meta.env.PUBLIC_PB);
  const fullform = document.getElementById("myForm");
  if (fullform) {
    fullform.addEventListener("submit", Submit);
  }

  document.getElementsByTagName("button")[0].removeAttribute("disabled");

  const emailform = document.getElementById("email");

  // noinspection TypeScriptUnresolvedReference
  if (pb.authStore?.model?.email && emailform) {
    // noinspection TypeScriptUnresolvedReference
    emailform.innerHTML = pb.authStore?.model?.email;
  }

  async function Submit(event: SubmitEvent) {
    event.preventDefault();
    const data = {
      vote: document.forms[0]["vote"].value,
    };

    if (pb.authStore?.model?.id) {
      await pb
        .collection("users")
        .update(pb.authStore.model.id, data)
        .then(() => navigate("/success/"));
    }
  }
</script>
<style is:inline>
  input[type="radio"] {
    box-shadow: none !important;
  }
  @media (prefers-color-scheme: dark) {
    input:checked {
      border: 8px solid;
      background-image: none !important;
    }
  }
</style>
<form id="myForm">
  <div
    class="px-4 py-8 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20"
  >
    <div class="grid gap-8 lg:grid-cols-2 sm:max-w-sm sm:mx-auto lg:max-w-full">
      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-red-400 dark:text-[#ff9580]">RED</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-red-600 ring-red-600 dark:text-[#ff9580] dark:border-[#ff9580] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="1"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              6E 伍智城
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              ドライフラワー<br class={"lg:hidden"} />(乾燥花)
            </p>
          </div>
        </div>
      </label>
      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-red-400 dark:text-[#ff9580]">RED</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-red-600 ring-red-600 dark:text-[#ff9580] dark:border-[#ff9580] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="2"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5E 梁靖桐 4D 麥洪華
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              十分錯
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-yellow-400 dark:text-[#ffff80]">YELLOW</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-yellow-600 ring-yellow-600 dark:text-[#ffff80] dark:border-[#ffff80] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="3"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5A 吳競翀
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              時候不早
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-yellow-400 dark:text-[#ffff80]">YELLOW</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-yellow-600 ring-yellow-600 dark:text-[#ffff80] dark:border-[#ffff80] dark:border-2 dark:bg-[#21222C] dark:checked:border-10"
                name="vote"
                value="4"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5C 陳芊羽 5C 黄思姸 <br class={"lg:hidden"} />5E 許芯緹
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              長相廝守
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-blue-400 dark:text-[#80ffea]">BLUE</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-blue-600 ring-blue-600 dark:text-[#80ffea] dark:border-[#80ffea] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="5"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5C 陳雋昇
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              追
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-blue-400 dark:text-[#80ffea]">BLUE</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-blue-600 ring-blue-600 dark:text-[#80ffea] dark:border-[#80ffea] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="6"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5E 謝澔賢 5E 俞逸謙
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              時光倒流一句話
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-green-400 dark:text-[#8aff80]">GREEN</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-green-600 ring-green-600 dark:text-[#8aff80] dark:border-[#8aff80] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="7"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              6B 姚詠語
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              老派約會之必要
            </p>
          </div>
        </div>
      </label>

      <label class="flex">
        <div class="pt-1 mr-6 text-center w-20">
          <div
            class="px-2 pb-1 mb-1 border-b border-gray-400 dark:border-white"
          >
            <p class="text-sm text-green-400 dark:text-[#8aff80]">GREEN</p>
          </div>
          <div class="px-2">
            <p class="text-lg font-bold">
              <input
                type="radio"
                class="form-radio text-xl ease-in duration-200 text-green-600 ring-green-600 dark:text-[#8aff80] dark:border-[#8aff80] dark:border-2 dark:bg-[#21222C]"
                name="vote"
                value="8"
              />
            </p>
          </div>
        </div>
        <div>
          <div class="mb-2">
            <p
              class="text-xs font-semibold tracking-wide uppercase transition-colors duration-200 text-deep-purple-accent-400 hover:text-deep-purple-800 dark:text-[#F8F8F2]"
            >
              5C 童明慧 5C 李佳樂
            </p>
          </div>
          <div class="mb-2">
            <p
              class="inline-block text-xl font-bold leading-7 text-black transition-colors duration-200 hover:text-deep-purple-accent-400 dark:text-[#F8F8F2]"
            >
              小幸運
            </p>
          </div>
        </div>
      </label>
    </div>
  </div>
  <div class={"grid pb-3 mx-auto"}>
    <button
      class={"bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded inline-block min-w-[50%] mx-auto dark:bg-[#80FFEA] dark:text-[#21222C] dark:border-[#80FFEA] "}
      type="submit"
      disabled
      >Submit
    </button>
    <p class="text-center dark:text-[#F8F8F2]" id="email"></p>
  </div>
</form>
